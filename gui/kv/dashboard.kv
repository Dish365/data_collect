<DashboardScreen>:
    name: "dashboard"

    MDBoxLayout:
        orientation: 'vertical'

        # Responsive Top Bar
        MDBoxLayout:
            size_hint_y: None
            height: dp(56)
            md_bg_color: app.theme_cls.primary_color
            padding: dp(8), 0
            spacing: dp(8)

            MDIconButton:
                icon: "view-dashboard"
                theme_icon_color: "Custom"
                icon_color: 1, 1, 1, 1
                pos_hint: {"center_y": 0.5}

            MDLabel:
                id: "top_title"
                text: "Research Data Collector"
                font_style: "H6"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                halign: "left"
                size_hint_x: 1
                pos_hint: {"center_y": 0.5}

            MDBoxLayout:
                orientation: "horizontal"
                spacing: dp(4)
                size_hint_x: None
                width: self.minimum_width
                pos_hint: {"center_y": 0.5}


                MDIconButton:
                    icon: "account-circle"
                    theme_icon_color: "Custom"
                    icon_color: 1, 1, 1, 1
                    pos_hint: {"center_y": 0.5}

                MDLabel:
                    text: "John Doe"
                    font_style: "Body1"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    size_hint_x: None
                    width: dp(80)
                    pos_hint: {"center_y": 0.5}

        # Scrollable main content
        ScrollView:
            MDBoxLayout:
                orientation: 'vertical'
                padding: dp(16)
                spacing: dp(16)
                adaptive_height: True

                MDLabel:
                    text: "Research Dashboard"
                    font_style: "H5"
                    size_hint_y: None
                    height: self.texture_size[1] + dp(10)
                    halign: "left"

                MDGridLayout:
                    id: stats_grid
                    cols: 2
                    adaptive_height: True
                    spacing: dp(12)

                    StatCard:
                        title: "Total Responses"
                        value: "1297"
                        icon: "database"
                        note: "↑ 23% this week"

                    StatCard:
                        title: "Active Projects"
                        value: "8"
                        icon: "folder"
                        note: "+2 new"

                    StatCard:
                        title: "Pending Sync"
                        value: "47"
                        icon: "sync"
                        note: "Will sync when online"

                    StatCard:
                        title: "Team Members"
                        value: "12"
                        icon: "account-group"
                        note: "Across 3 locations"

                MDLabel:
                    text: "Quick Actions"
                    font_style: "Subtitle1"
                    halign: "left"
                    size_hint_y: None
                    height: self.texture_size[1] + dp(10)

                MDGridLayout:
                    cols: 2
                    spacing: dp(10)
                    adaptive_height: True

                    MDRaisedButton:
                        text: "Projects"
                        on_press: root.navigate_to("projects")

                    MDRaisedButton:
                        text: "Collect Data"
                        on_press: root.navigate_to("collect_data")

                    MDRaisedButton:
                        text: "Analytics"
                        on_press: root.navigate_to("analytics")

                    MDRaisedButton:
                        text: "Form Builder"
                        on_press: root.navigate_to("form_builder")

                MDLabel:
                    text: "Recent Activity"
                    font_style: "Subtitle1"
                    halign: "left"
                    size_hint_y: None
                    height: self.texture_size[1] + dp(10)

                MDCard:
                    orientation: "vertical"
                    padding: dp(12)
                    size_hint_y: None
                    height: dp(100)
                    elevation: 0.5
                    radius: [10, 10, 10, 10]

                    MDBoxLayout:
                        orientation: "horizontal"
                        spacing: dp(10)

                        MDLabel:
                            text: "[b]Rural Health Survey[/b]"
                            markup: True
                            font_style: "Subtitle1"
                            theme_text_color: "Primary"

                        Widget:

                        MDChip:
                            text: "Active"
                            md_bg_color: 0, 0.7, 0.4, 1
                            text_color: 1, 1, 1, 1
                            size_hint: None, None
                            height: dp(32)
                            width: dp(90)
                            pos_hint: {"center_y": 0.5}

                    MDLabel:
                        text: "\U0001F4CD Kibera   \U0001F4CA 234 responses   ⏱ 2 hours ago"
                        theme_text_color: "Hint"
                        font_style: "Caption"
                        halign: "left"
