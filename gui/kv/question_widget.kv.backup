#:kivy 2.0
#:import MDCard kivymd.uix.card.MDCard
#:import MDBoxLayout kivymd.uix.boxlayout.MDBoxLayout
#:import MDTextField kivymd.uix.textfield.MDTextField
#:import MDButton kivymd.uix.button.MDButton
#:import MDButtonText kivymd.uix.button.MDButtonText
#:import MDButtonIcon kivymd.uix.button.MDButtonIcon
#:import MDIconButton kivymd.uix.button.MDIconButton
#:import MDLabel kivymd.uix.label.MDLabel
#:import MDIcon kivymd.uix.icon.MDIcon
#:import MDCheckbox kivymd.uix.selectioncontrol.MDCheckbox
#:import MDScrollView kivymd.uix.scrollview.MDScrollView

# Modern QuestionWidget using KivyMD 2.0
<QuestionWidget>:
    orientation: 'vertical'
    size_hint_y: None
    height: dp(180)
    elevation: 2
    md_bg_color: 0.99, 0.99, 0.99, 1
    radius: [12, 12, 12, 12]
    padding: [dp(16), dp(12)]
    spacing: dp(12)
    
    # Question Header
    MDBoxLayout:
        orientation: 'horizontal'
        spacing: dp(12)
        size_hint_y: None
        height: dp(32)
        
        MDIcon:
            icon: "help-circle"
            size_hint: None, None
            size: dp(24), dp(24)
            theme_icon_color: "Primary"
        
        MDLabel:
            text: root.question_text or "Question"
            font_style: "Subtitle1"
            theme_text_color: "Primary"
            bold: True
        
        Widget:
            size_hint_x: 1
        
        MDIconButton:
            icon: "delete-outline"
            size_hint: None, None
            size: dp(32), dp(32)
            theme_icon_color: "Custom"
            icon_color: 0.8, 0.2, 0.2, 1
            on_release: root.dispatch('on_delete')
    
    # Question Type Badge
    MDBoxLayout:
        orientation: 'horizontal'
        spacing: dp(8)
        size_hint_y: None
        height: dp(24)
        
        MDIcon:
            icon: "tag-outline"
            size_hint: None, None
            size: dp(16), dp(16)
            theme_icon_color: "Secondary"
        
        MDLabel:
            text: f"Type: {root.question_type.title()}"
            font_style: "Caption"
            theme_text_color: "Secondary"
            size_hint_x: 1
    
    # Response Area
    MDBoxLayout:
        id: response_area
        orientation: 'vertical'
        spacing: dp(8)
        size_hint_y: None
        adaptive_height: True

# Response widgets for different question types
<TextResponseWidget@MDTextField>:
    hint_text: "Text response"
    mode: "outlined"
    size_hint_y: None
    height: dp(48)

<NumberResponseWidget@MDTextField>:
    hint_text: "Numeric response"
    mode: "outlined"
    input_filter: "float"
    size_hint_y: None
    height: dp(48)

<SelectResponseWidget@MDButton>:
    question_options: []
    
    style: "outlined"
    size_hint_y: None
    height: dp(48)
    
    MDButtonText:
        text: "Select an option"
        font_size: "14sp"
    
    MDButtonIcon:
        icon: "chevron-down"

<MultiSelectResponseWidget@MDScrollView>:
    question_options: []
    
    size_hint_y: None
    height: dp(120)
    do_scroll_x: False
    
    MDBoxLayout:
        orientation: 'vertical'
        spacing: dp(4)
        size_hint_y: None
        adaptive_height: True
        
        # Options will be populated dynamically

<DateResponseWidget@MDButton>:
    style: "outlined"
    size_hint_y: None
    height: dp(48)
    
    MDButtonIcon:
        icon: "calendar"
    
    MDButtonText:
        text: "Select date"
        font_size: "14sp"

<TimeResponseWidget@MDButton>:
    style: "outlined"
    size_hint_y: None
    height: dp(48)
    
    MDButtonIcon:
        icon: "clock-outline"
    
    MDButtonText:
        text: "Select time"
        font_size: "14sp"

<DateTimeResponseWidget@MDBoxLayout>:
    orientation: 'horizontal'
    spacing: dp(8)
    size_hint_y: None
    height: dp(48)
    
    MDButton:
        style: "outlined"
        size_hint_x: 1
        height: dp(48)
        
        MDButtonIcon:
            icon: "calendar"
        
        MDButtonText:
            text: "Date"
            font_size: "14sp"
    
    MDButton:
        style: "outlined"
        size_hint_x: 1
        height: dp(48)
        
        MDButtonIcon:
            icon: "clock-outline"
        
        MDButtonText:
            text: "Time"
            font_size: "14sp"

<CheckboxOption@MDBoxLayout>:
    option_text: ""
    is_checked: False
    
    orientation: 'horizontal'
    spacing: dp(8)
    size_hint_y: None
    height: dp(32)
    
    MDCheckbox:
        size_hint: None, None
        size: dp(24), dp(24)
        active: root.is_checked
        on_active: setattr(root, 'is_checked', self.active)
    
    MDLabel:
        text: root.option_text
        font_style: "Body2"
        theme_text_color: "Primary"
        valign: "center"

# Modern styling variations
<CompactQuestionWidget@QuestionWidget>:
    height: dp(120)
    padding: [dp(12), dp(8)]
    spacing: dp(8)

<ExpandedQuestionWidget@QuestionWidget>:
    height: dp(240)
    padding: [dp(20), dp(16)]
    spacing: dp(16)

<PrimaryQuestionWidget@QuestionWidget>:
    md_bg_color: app.theme_cls.primary_color
    
    MDLabel:
        theme_text_color: "Custom"
        text_color: 1, 1, 1, 1

<SecondaryQuestionWidget@QuestionWidget>:
    md_bg_color: app.theme_cls.secondary_color
    
    MDLabel:
        theme_text_color: "Custom"
        text_color: 1, 1, 1, 1 